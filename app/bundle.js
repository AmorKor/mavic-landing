(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Controller = void 0;
function Controller(arg) {
    var _a;
    let isEnabled = ((_a = arg.node) === null || _a === void 0 ? void 0 : _a.classList.contains(arg.activeSel)) ? true : false;
    return {
        getElement: () => arg.node,
        getState: () => isEnabled,
        renderState: (isActive) => {
            var _a, _b;
            if (isActive) {
                (_a = arg.node) === null || _a === void 0 ? void 0 : _a.classList.add(arg.activeSel);
            }
            else {
                (_b = arg.node) === null || _b === void 0 ? void 0 : _b.classList.remove(arg.activeSel);
            }
            isEnabled = isActive;
        },
    };
}
exports.Controller = Controller;
},{}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.LinkedList = exports.linkNodes = exports.NodeF = void 0;
function NodeF(element) {
    return {
        element,
        next: null,
        prev: null
    };
}
exports.NodeF = NodeF;
function linkNodes(nodes) {
    return nodes.map((node, i, arr) => (Object.assign(node, {
        next: arr[i + 1],
        prev: arr[i - 1]
    })));
}
exports.linkNodes = linkNodes;
function LinkedList(nodes) {
    const collection = linkNodes([...nodes].map(NodeF));
    let head = collection[0];
    let tail = collection[collection.length - 1];
    let current = collection[0];
    return {
        getHead: () => head,
        getTail: () => tail,
        getCurrent: () => current,
        indexOf: (node) => node ? collection.indexOf(node) : null,
        setCurrent: (index) => collection[index] ? current = collection[index] : tail.next,
        toNext: () => current.next ? current = current.next : current.next,
        toPrev: () => current.prev ? current = current.prev : current.prev
    };
}
exports.LinkedList = LinkedList;
},{}],3:[function(require,module,exports){
"use strict";
var _a, _b, _c, _d, _e, _f;
Object.defineProperty(exports, "__esModule", { value: true });
exports.imgSlider = void 0;
const utils_1 = require("./utils");
const linked_list_1 = require("./linked_list");
const controller_1 = require("./controller");
const transformer_1 = require("./transformer");
const observer_1 = require("./observer");
const menu = {
    button: controller_1.Controller({
        node: document.querySelector('.burger'),
        activeSel: 'burger--active'
    }),
    nav: controller_1.Controller({
        node: document.querySelector('.menu'),
        activeSel: 'menu--active'
    })
};
(_a = document.querySelector('.burger')) === null || _a === void 0 ? void 0 : _a.addEventListener('click', () => {
    if (!menu.nav.getState()) {
        menu.button.renderState(true);
        menu.nav.renderState(true);
    }
    else {
        menu.button.renderState(false);
        menu.nav.renderState(false);
    }
});
exports.imgSlider = {
    pages: linked_list_1.LinkedList(document.querySelectorAll('.slider__img')),
    track: observer_1.TransformerObserver(transformer_1.Transformer({
        node: document.querySelector('.slider__inner'),
        action: 'translateX'
    })),
    nextButton: controller_1.Controller({
        node: document.querySelector('.controller--right'),
        activeSel: 'controller--active'
    }),
    prevButton: controller_1.Controller({
        node: document.querySelector('.controller--left'),
        activeSel: 'controller--active'
    }),
    checkButtons: function () {
        const current = this.pages.getCurrent();
        if (!(current === null || current === void 0 ? void 0 : current.prev)) {
            this.prevButton.renderState(false);
        }
        else if (!(current === null || current === void 0 ? void 0 : current.next)) {
            this.nextButton.renderState(false);
        }
        else {
            this.prevButton.renderState(true);
            this.nextButton.renderState(true);
        }
    }
};
(_b = document.querySelector('.controller--right')) === null || _b === void 0 ? void 0 : _b.addEventListener('click', utils_1.debounce(() => {
    const current = exports.imgSlider.pages.toNext();
    exports.imgSlider.track.update({
        value: current === null || current === void 0 ? void 0 : current.element.clientWidth,
        index: exports.imgSlider.pages.indexOf(current)
    });
    exports.imgSlider.checkButtons();
}, 300, true));
(_c = document.querySelector('.controller--left')) === null || _c === void 0 ? void 0 : _c.addEventListener('click', utils_1.debounce(() => {
    const current = exports.imgSlider.pages.toPrev();
    exports.imgSlider.track.update({
        value: current === null || current === void 0 ? void 0 : current.element.clientWidth,
        index: exports.imgSlider.pages.indexOf(current)
    });
    exports.imgSlider.checkButtons();
}, 300, true));
const pageSlider = {
    pages: linked_list_1.LinkedList(document.querySelectorAll('.page')),
    track: observer_1.TransformerObserver(transformer_1.Transformer({
        node: document.querySelector('.body__inner'),
        action: 'translateY'
    })),
    nextButton: controller_1.Controller({
        node: document.querySelector('.sliderBtn'),
        activeSel: 'sliderBtn--active'
    }),
    links: [...document.querySelectorAll('.pointer')]
        .map((el) => controller_1.Controller({
        node: el,
        activeSel: 'menu__link--active'
    })),
    background: controller_1.Controller({
        node: document.querySelector('.background'),
        activeSel: 'background--main'
    }),
    checkButton: function () {
        const current = this.pages.getCurrent();
        if (!current.next) {
            this.nextButton.renderState(false);
        }
        else {
            this.nextButton.renderState(true);
        }
    },
    checkBackground: function () {
        const current = this.pages.getCurrent();
        if (!current.prev) {
            this.background.renderState(false);
        }
        else {
            this.background.renderState(true);
        }
    }
};
const linkObservers = observer_1.ObserverList(pageSlider.links
    .map(l => observer_1.LinkObserver(l)));
const linkPublisher = observer_1.Publisher(linkObservers);
(_d = document.querySelector('.sliderBtn')) === null || _d === void 0 ? void 0 : _d.addEventListener('click', utils_1.debounce(() => {
    const current = pageSlider.pages.toNext();
    const index = pageSlider.pages.indexOf(current) || -1;
    pageSlider.track.update({
        value: current === null || current === void 0 ? void 0 : current.element.clientHeight,
        index: index
    });
    linkPublisher.notify(pageSlider.links[index].getElement());
    pageSlider.checkButton();
    pageSlider.checkBackground();
}, 300, true));
(_e = document.querySelector('.header')) === null || _e === void 0 ? void 0 : _e.addEventListener('click', utils_1.debounce((e) => {
    const controller = pageSlider.links.find((contr) => contr.getElement() === e.target);
    if (!controller)
        return;
    const index = pageSlider.links.indexOf(controller);
    const current = pageSlider.pages.setCurrent(index);
    pageSlider.track.update({
        value: current === null || current === void 0 ? void 0 : current.element.clientHeight,
        index: pageSlider.pages.indexOf(current)
    });
    if (utils_1.isMobile(1150)) {
        menu.nav.renderState(false);
        menu.button.renderState(false);
    }
    linkPublisher.notify(controller.getElement());
    pageSlider.checkButton();
    pageSlider.checkBackground();
}, 300, true));
const answers = observer_1.ObserverList([...document.querySelectorAll('.question__answer')].map(a => {
    return observer_1.LinkObserver(controller_1.Controller({
        node: a,
        activeSel: 'question__answer--active'
    }));
}));
const qaButtons = observer_1.ObserverList([...document.querySelectorAll('.question__controller')].map(c => {
    return observer_1.LinkObserver(controller_1.Controller({
        node: c,
        activeSel: 'question__controller--active'
    }));
}));
const answerPublisher = observer_1.Publisher(answers);
const qaButtonPublisher = observer_1.Publisher(qaButtons);
(_f = document.querySelector('.qa__wrapper')) === null || _f === void 0 ? void 0 : _f.addEventListener('click', (e) => {
    console.log(e);
    if (utils_1.isMobile(770)) {
        answerPublisher.notify(e.target.children[0]);
        qaButtonPublisher.notify(e.target.children[1]);
        return;
    }
    qaButtonPublisher.notify(e.target);
    answerPublisher.notify(e.target.previousElementSibling);
});
window.addEventListener('resize', utils_1.debounce(() => {
    const current = pageSlider.pages.getCurrent();
    pageSlider.track.update({
        value: current.element.clientHeight,
        index: pageSlider.pages.indexOf(current)
    });
}, 200));
},{"./controller":1,"./linked_list":2,"./observer":4,"./transformer":5,"./utils":6}],4:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.TransformerObserver = exports.LinkObserver = exports.Publisher = exports.ObserverList = void 0;
function ObserverList(observers) {
    const _list = observers ? observers : [];
    return {
        attach: (obs) => _list.push(obs),
        detach: (obs) => _list.splice(_list.indexOf(obs), 1),
        getByIndex: (index) => _list[index],
        getIndexOf: (obs) => _list.findIndex(el => el === obs),
        getList: () => _list
    };
}
exports.ObserverList = ObserverList;
function Publisher(list) {
    let _observers = list ? list : ObserverList();
    return {
        subscribe: (obs) => _observers.attach(obs),
        unsubscribe: (obs) => _observers.detach(obs),
        notify: (data) => _observers.getList().forEach((obs) => obs.update(data))
    };
}
exports.Publisher = Publisher;
function LinkObserver(link) {
    const _link = link;
    return {
        update(data) {
            if (data === _link.getElement()) {
                _link.renderState(true);
            }
            else {
                _link.renderState(false);
            }
        }
    };
}
exports.LinkObserver = LinkObserver;
function TransformerObserver(transformer) {
    const _transformer = transformer;
    return {
        update(data) {
            _transformer.setValue(`-${data.value * data.index}px`);
            _transformer.render();
        }
    };
}
exports.TransformerObserver = TransformerObserver;
},{}],5:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Transformer = void 0;
function Transformer(arg) {
    return {
        render: () => arg.node ?
            arg.node.style.transform = `${arg.action}(${arg.value})` :
            null,
        getElement: () => arg.node,
        setAction: (act) => (arg.action = act),
        setValue: (val) => (arg.value = val)
    };
}
exports.Transformer = Transformer;
},{}],6:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.debounce = exports.isMobile = void 0;
const isMobile = (width) => window.innerWidth < width ? true : false;
exports.isMobile = isMobile;
function debounce(fn, wait, immediate) {
    let timeout;
    return function deffered(...args) {
        const callNow = immediate && !timeout;
        const invoke = () => {
            timeout = undefined;
            if (!immediate)
                fn.apply(deffered, args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(invoke, wait);
        if (callNow)
            fn.apply(deffered, args);
    };
}
exports.debounce = debounce;
},{}]},{},[3,2,4,1,5,6])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvYXBwL2NvbnRyb2xsZXIudHMiLCJzcmMvYXBwL2xpbmtlZF9saXN0LnRzIiwic3JjL2FwcC9tYWluLnRzIiwic3JjL2FwcC9vYnNlcnZlci50cyIsInNyYy9hcHAvdHJhbnNmb3JtZXIudHMiLCJzcmMvYXBwL3V0aWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0FDTUEsU0FBZ0IsVUFBVSxDQUN0QixHQUM2Qzs7SUFHN0MsSUFBSSxTQUFTLEdBQUcsT0FBQSxHQUFHLENBQUMsSUFBSSwwQ0FBRSxTQUFTLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEdBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFBO0lBQzFFLE9BQU87UUFFSCxVQUFVLEVBQUUsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLElBQUk7UUFDMUIsUUFBUSxFQUFFLEdBQUcsRUFBRSxDQUFDLFNBQVM7UUFFekIsV0FBVyxFQUFFLENBQUMsUUFBUSxFQUFFLEVBQUU7O1lBQ3RCLElBQUcsUUFBUSxFQUFFO2dCQUNULE1BQUEsR0FBRyxDQUFDLElBQUksMENBQUUsU0FBUyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFDO2FBQ3pDO2lCQUFNO2dCQUNILE1BQUEsR0FBRyxDQUFDLElBQUksMENBQUUsU0FBUyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFDO2FBQzVDO1lBQ0QsU0FBUyxHQUFHLFFBQVEsQ0FBQTtRQUN4QixDQUFDO0tBQ0osQ0FBQTtBQUNMLENBQUM7QUFwQkQsZ0NBb0JDOzs7OztBQ1RELFNBQWdCLEtBQUssQ0FBQyxPQUFnQjtJQUNsQyxPQUFPO1FBQ0gsT0FBTztRQUNQLElBQUksRUFBRSxJQUFJO1FBQ1YsSUFBSSxFQUFFLElBQUk7S0FDYixDQUFBO0FBQ0wsQ0FBQztBQU5ELHNCQU1DO0FBRUQsU0FBZ0Is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S0FBSyxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsQ0FBQTtJQUN4QyxDQUFDLENBQUE7QUFDTCxDQUFDO0FBakJELDRCQWlCQyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImV4cG9ydCBpbnRlcmZhY2UgSUNvbnRyb2xsZXIge1xyXG4gICAgZ2V0RWxlbWVudCgpOiBIVE1MRWxlbWVudCB8IG51bGxcclxuICAgIGdldFN0YXRlKCk6IGJvb2xlYW5cclxuICAgIHJlbmRlclN0YXRlKGlzQWN0aXZlOiBib29sZWFuKTogdm9pZFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gQ29udHJvbGxlcihcclxuICAgIGFyZzogXHJcbiAgICB7bm9kZTogSFRNTEVsZW1lbnQgfCBudWxsLCBhY3RpdmVTZWw6IHN0cmluZ31cclxuKTogSUNvbnRyb2xsZXIgXHJcbntcclxuICAgIGxldCBpc0VuYWJsZWQgPSBhcmcubm9kZT8uY2xhc3NMaXN0LmNvbnRhaW5zKGFyZy5hY3RpdmVTZWwpID8gdHJ1ZSA6IGZhbHNlXHJcbiAgICByZXR1cm4ge1xyXG4gICAgXHJcbiAgICAgICAgZ2V0RWxlbWVudDogKCkgPT4gYXJnLm5vZGUsXHJcbiAgICAgICAgZ2V0U3RhdGU6ICgpID0+IGlzRW5hYmxlZCxcclxuICAgICAgICBcclxuICAgICAgICByZW5kZXJTdGF0ZTogKGlzQWN0aXZlKSA9PiB7ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmKGlzQWN0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICBhcmcubm9kZT8uY2xhc3NMaXN0LmFkZChhcmcuYWN0aXZlU2VsKVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYXJnLm5vZGU/LmNsYXNzTGlzdC5yZW1vdmUoYXJnLmFjdGl2ZVNlbClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpc0VuYWJsZWQgPSBpc0FjdGl2ZVxyXG4gICAgICAgIH0sXHJcbiAgICB9XHJcbn1cclxuIiwiaW50ZXJmYWNlIElOb2RlIHtcclxuICAgIGVsZW1lbnQ6IGFueVxyXG4gICAgbmV4dDogSU5vZGUgfCBudWxsXHJcbiAgICBwcmV2OiBJTm9kZSB8IG51bGxcclxufVxyXG5cclxuaW50ZXJmYWNlIElMaW5rZWRMaXN0IHtcclxuICAgIGdldEhlYWQoKTogSU5vZGVcclxuICAgIGdldFRhaWwoKTogSU5vZGVcclxuICAgIGdldEN1cnJlbnQoKTogSU5vZGVcclxuICAgIGluZGV4T2Yobm9kZTogSU5vZGUgfCBudWxsKTogbnVtYmVyIHwgbnVsbFxyXG4gICAgXHJcbiAgICBzZXRDdXJyZW50KGluZGV4OiBudW1iZXIpOiBJTm9kZSB8IG51bGxcclxuICAgIHRvTmV4dCgpOiBJTm9kZSB8IG51bGxcclxuICAgIHRvUHJldigpOiBJTm9kZSB8IG51bGxcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIE5vZGVGKGVsZW1lbnQ6IEVsZW1lbnQpOiBJTm9kZSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGVsZW1lbnQsXHJcbiAgICAgICAgbmV4dDogbnVsbCxcclxuICAgICAgICBwcmV2OiBudWxsICAgIFxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbGlua05vZGVzKG5vZGVzOiBJTm9kZVtdKTogSU5vZGVbXSB7XHJcbiAgICByZXR1cm4gbm9kZXMubWFwKChub2RlLCBpLCBhcnIpID0+IChcclxuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihub2RlLCB7XHJcbiAgICAgICAgICAgICAgICBuZXh0OiBhcnJbaSArIDFdLFxyXG4gICAgICAgICAgICAgICAgcHJldjogYXJyW2kgLSAxXVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICkpXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBMaW5rZWRMaXN0KG5vZGVzOiBOb2RlTGlzdE9mPEVsZW1lbnQ+KTogSUxpbmtlZExpc3Qge1xyXG4gICAgY29uc3QgY29sbGVjdGlvbiA9IGxpbmtOb2RlcyhbLi4ubm9kZXNdLm1hcChOb2RlRikpXHJcbiAgICBsZXQgaGVhZCA9IGNvbGxlY3Rpb25bMF1cclxuICAgIGxldCB0YWlsID0gY29sbGVjdGlvbltjb2xsZWN0aW9uLmxlbmd0aCAtIDFdXHJcbiAgICBsZXQgY3VycmVudCA9IGNvbGxlY3Rpb25bMF1cclxuICAgIFxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBnZXRIZWFkOiAoKSA9PiBoZWFkLFxyXG4gICAgICAgIGdldFRhaWw6ICgpID0+IHRhaWwsXHJcbiAgICAgICAgZ2V0Q3VycmVudDogKCkgPT4gY3VycmVudCxcclxuICAgICAgICBpbmRleE9mOiAobm9kZSkgPT4gbm9kZSA/IGNvbGxlY3Rpb24uaW5kZXhPZihub2RlKSA6IG51bGwsXHJcbiAgICAgICAgLy8gZ2V0QnlJbmRleCgpXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICBzZXRDdXJyZW50OiAoaW5kZXgpID0+IGNvbGxlY3Rpb25baW5kZXhdID8gY3VycmVudCA9IGNvbGxlY3Rpb25baW5kZXhdOiB0YWlsLm5leHQsXHJcbiAgICAgICAgdG9OZXh0OiAoKSA9PiBjdXJyZW50Lm5leHQgPyBjdXJyZW50ID0gY3VycmVudC5uZXh0IDogY3VycmVudC5uZXh0LFxyXG4gICAgICAgIHRvUHJldjogKCkgPT4gY3VycmVudC5wcmV2ID8gY3VycmVudCA9IGN1cnJlbnQucHJldiA6IGN1cnJlbnQucHJldlxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7aXNNb2JpbGUsIGRlYm91bmNlfSBmcm9tICcuL3V0aWxzJ1xyXG5pbXBvcnQge0xpbmtlZExpc3R9IGZyb20gJy4vbGlua2VkX2xpc3QnXHJcbmltcG9ydCB7Q29udHJvbGxlcn0gZnJvbSAnLi9jb250cm9sbGVyJ1xyXG5pbXBvcnQge1RyYW5zZm9ybWVyfSBmcm9tICcuL3RyYW5zZm9ybWVyJ1xyXG5pbXBvcnQge1B1Ymxpc2hlciwgT2JzZXJ2ZXJMaXN0LCBMaW5rT2JzZXJ2ZXIsIFRyYW5zZm9ybWVyT2JzZXJ2ZXJ9IGZyb20gJy4vb2JzZXJ2ZXInXHJcblxyXG4vLyBtZW51IG9uIG1vYmlsZSB2ZXJzaW9uIHNldHVwXHJcbmNvbnN0IG1lbnUgPSB7XHJcbiAgICBidXR0b246IENvbnRyb2xsZXIoe1xyXG4gICAgICAgIG5vZGU6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXJnZXInKSxcclxuICAgICAgICBhY3RpdmVTZWw6ICdidXJnZXItLWFjdGl2ZSdcclxuICAgIH0pLFxyXG4gICAgbmF2OiBDb250cm9sbGVyKHtcclxuICAgICAgICBub2RlOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVudScpLFxyXG4gICAgICAgIGFjdGl2ZVNlbDogJ21lbnUtLWFjdGl2ZSdcclxuICAgIH0pIFxyXG59XHJcblxyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnVyZ2VyJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgaWYoIW1lbnUubmF2LmdldFN0YXRlKCkpIHtcclxuICAgICAgICBtZW51LmJ1dHRvbi5yZW5kZXJTdGF0ZSh0cnVlKVxyXG4gICAgICAgIG1lbnUubmF2LnJlbmRlclN0YXRlKHRydWUpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIG1lbnUuYnV0dG9uLnJlbmRlclN0YXRlKGZhbHNlKVxyXG4gICAgICAgIG1lbnUubmF2LnJlbmRlclN0YXRlKGZhbHNlKVxyXG4gICAgfVxyXG59KVxyXG5cclxuLy8gZGVzY3JpcHRpb24gc2xpZGVyIHNldHVwXHJcbmV4cG9ydCBjb25zdCBpbWdTbGlkZXIgPSB7XHJcbiAgICBwYWdlczogTGlua2VkTGlzdChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVyX19pbWcnKSksXHJcbiAgICBcclxuICAgIHRyYWNrOiBUcmFuc2Zvcm1lck9ic2VydmVyKFRyYW5zZm9ybWVyKHtcclxuICAgICAgICBub2RlOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyX19pbm5lcicpLFxyXG4gICAgICAgIGFjdGlvbjogJ3RyYW5zbGF0ZVgnXHJcbiAgICAgICAgfSlcclxuICAgICksXHJcbiAgICBcclxuICAgIG5leHRCdXR0b246IENvbnRyb2xsZXIoe1xyXG4gICAgICAgIG5vZGU6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250cm9sbGVyLS1yaWdodCcpLFxyXG4gICAgICAgIGFjdGl2ZVNlbDogJ2NvbnRyb2xsZXItLWFjdGl2ZSd9XHJcbiAgICAgICAgKSxcclxuICAgICAgICBcclxuICAgIHByZXZCdXR0b246IENvbnRyb2xsZXIoe1xyXG4gICAgICAgIG5vZGU6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250cm9sbGVyLS1sZWZ0JyksXHJcbiAgICAgICAgYWN0aXZlU2VsOiAnY29udHJvbGxlci0tYWN0aXZlJ31cclxuICAgICAgICApLFxyXG4gICAgICAgIFxyXG4gICAgY2hlY2tCdXR0b25zOiBmdW5jdGlvbigpIHtcclxuICAgICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5wYWdlcy5nZXRDdXJyZW50KClcclxuXHJcbiAgICAgICAgaWYoIWN1cnJlbnQ/LnByZXYpIHtcclxuICAgICAgICAgICAgdGhpcy5wcmV2QnV0dG9uLnJlbmRlclN0YXRlKGZhbHNlKVxyXG4gICAgICAgIH0gZWxzZSBpZighY3VycmVudD8ubmV4dCl7XHJcbiAgICAgICAgICAgIHRoaXMubmV4dEJ1dHRvbi5yZW5kZXJTdGF0ZShmYWxzZSlcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnByZXZCdXR0b24ucmVuZGVyU3RhdGUodHJ1ZSlcclxuICAgICAgICAgICAgdGhpcy5uZXh0QnV0dG9uLnJlbmRlclN0YXRlKHRydWUpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udHJvbGxlci0tcmlnaHQnKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBkZWJvdW5jZSgoKSA9PiB7XHJcbiAgICBjb25zdCBjdXJyZW50ID0gaW1nU2xpZGVyLnBhZ2VzLnRvTmV4dCgpIFxyXG4gICAgaW1nU2xpZGVyLnRyYWNrLnVwZGF0ZSh7XHJcbiAgICAgICAgdmFsdWU6IGN1cnJlbnQ/LmVsZW1lbnQuY2xpZW50V2lkdGgsXHJcbiAgICAgICAgaW5kZXg6IGltZ1NsaWRlci5wYWdlcy5pbmRleE9mKGN1cnJlbnQpXHJcbiAgICB9KVxyXG5cclxuICAgIGltZ1NsaWRlci5jaGVja0J1dHRvbnMoKVxyXG59LCAzMDAsIHRydWUpKVxyXG5cclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRyb2xsZXItLWxlZnQnKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBkZWJvdW5jZSgoKSA9PiB7XHJcbiAgICBjb25zdCBjdXJyZW50ID0gaW1nU2xpZGVyLnBhZ2VzLnRvUHJldigpIFxyXG4gICAgaW1nU2xpZGVyLnRyYWNrLnVwZGF0ZSh7XHJcbiAgICAgICAgdmFsdWU6IGN1cnJlbnQ/LmVsZW1lbnQuY2xpZW50V2lkdGgsXHJcbiAgICAgICAgaW5kZXg6IGltZ1NsaWRlci5wYWdlcy5pbmRleE9mKGN1cnJlbnQpXHJcbiAgICB9KVxyXG5cclxuICAgIGltZ1NsaWRlci5jaGVja0J1dHRvbnMoKVxyXG59LCAzMDAsIHRydWUpKVxyXG5cclxuLy8gcGFnZSBzbGlkZXIgc2V0dXBcclxuY29uc3QgcGFnZVNsaWRlciA9IHtcclxuICAgIHBhZ2VzOiBMaW5rZWRMaXN0KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wYWdlJykpLFxyXG5cclxuICAgIHRyYWNrOiBUcmFuc2Zvcm1lck9ic2VydmVyKFRyYW5zZm9ybWVyKHtcclxuICAgICAgICBub2RlOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYm9keV9faW5uZXInKSxcclxuICAgICAgICBhY3Rpb246ICd0cmFuc2xhdGVZJ1xyXG4gICAgICAgIH0pXHJcbiAgICApLFxyXG5cclxuICAgIG5leHRCdXR0b246IENvbnRyb2xsZXIoe1xyXG4gICAgICAgIG5vZGU6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJCdG4nKSxcclxuICAgICAgICBhY3RpdmVTZWw6ICdzbGlkZXJCdG4tLWFjdGl2ZSd9XHJcbiAgICAgICAgKSxcclxuXHJcbiAgICBsaW5rczogWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTEVsZW1lbnQ+KCcucG9pbnRlcicpXVxyXG4gICAgICAgIC5tYXAoKGVsKSA9PiBDb250cm9sbGVyKHtcclxuICAgICAgICAgICAgbm9kZTogZWwsXHJcbiAgICAgICAgICAgIGFjdGl2ZVNlbDogJ21lbnVfX2xpbmstLWFjdGl2ZSdcclxuICAgICAgICB9KSksXHJcblxyXG4gICAgYmFja2dyb3VuZDogQ29udHJvbGxlcih7XHJcbiAgICAgICAgbm9kZTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJhY2tncm91bmQnKSxcclxuICAgICAgICBhY3RpdmVTZWw6ICdiYWNrZ3JvdW5kLS1tYWluJ1xyXG4gICAgfSksXHJcblxyXG4gICAgY2hlY2tCdXR0b246IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLnBhZ2VzLmdldEN1cnJlbnQoKVxyXG4gICAgICAgIGlmKCFjdXJyZW50Lm5leHQpIHtcclxuICAgICAgICAgICAgdGhpcy5uZXh0QnV0dG9uLnJlbmRlclN0YXRlKGZhbHNlKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubmV4dEJ1dHRvbi5yZW5kZXJTdGF0ZSh0cnVlKVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgY2hlY2tCYWNrZ3JvdW5kOiBmdW5jdGlvbigpIHtcclxuICAgICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5wYWdlcy5nZXRDdXJyZW50KClcclxuICAgICAgICBpZighY3VycmVudC5wcmV2KSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmFja2dyb3VuZC5yZW5kZXJTdGF0ZShmYWxzZSlcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmJhY2tncm91bmQucmVuZGVyU3RhdGUodHJ1ZSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIGZvciBzeW5jcm9uaXppbmcgaGVhZGVyIG1lbnUgd2l0aCBwYWdlIHNsaWRlclxyXG5jb25zdCBsaW5rT2JzZXJ2ZXJzID0gT2JzZXJ2ZXJMaXN0KFxyXG4gICAgcGFnZVNsaWRlci5saW5rc1xyXG4gICAgLm1hcChsID0+IExpbmtPYnNlcnZlcihsKSlcclxuKVxyXG5jb25zdCBsaW5rUHVibGlzaGVyID0gUHVibGlzaGVyKGxpbmtPYnNlcnZlcnMpXHJcblxyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyQnRuJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZGVib3VuY2UoKCkgPT4ge1xyXG4gICAgY29uc3QgY3VycmVudCA9IHBhZ2VTbGlkZXIucGFnZXMudG9OZXh0KClcclxuICAgIGNvbnN0IGluZGV4ID0gcGFnZVNsaWRlci5wYWdlcy5pbmRleE9mKGN1cnJlbnQpIHx8IC0xXHJcblxyXG4gICAgcGFnZVNsaWRlci50cmFjay51cGRhdGUoe1xyXG4gICAgICAgIHZhbHVlOiBjdXJyZW50Py5lbGVtZW50LmNsaWVudEhlaWdodCxcclxuICAgICAgICBpbmRleDogaW5kZXhcclxuICAgIH0pXHJcblxyXG4gICAgbGlua1B1Ymxpc2hlci5ub3RpZnkocGFnZVNsaWRlci5saW5rc1tpbmRleF0uZ2V0RWxlbWVudCgpKVxyXG5cclxuICAgIHBhZ2VTbGlkZXIuY2hlY2tCdXR0b24oKVxyXG4gICAgcGFnZVNsaWRlci5jaGVja0JhY2tncm91bmQoKVxyXG59LCAzMDAsIHRydWUpKVxyXG5cclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcicpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGRlYm91bmNlKChlOiBFdmVudCkgPT4geyAgICBcclxuICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBwYWdlU2xpZGVyLmxpbmtzLmZpbmQoKGNvbnRyKSA9PiBjb250ci5nZXRFbGVtZW50KCkgPT09IGUudGFyZ2V0KVxyXG5cclxuICAgIGlmKCFjb250cm9sbGVyKSByZXR1cm5cclxuICAgIGNvbnN0IGluZGV4ID0gcGFnZVNsaWRlci5saW5rcy5pbmRleE9mKGNvbnRyb2xsZXIpXHJcbiAgICBjb25zdCBjdXJyZW50ID0gcGFnZVNsaWRlci5wYWdlcy5zZXRDdXJyZW50KGluZGV4KVxyXG4gICAgXHJcbiAgICBwYWdlU2xpZGVyLnRyYWNrLnVwZGF0ZSh7XHJcbiAgICAgICAgdmFsdWU6IGN1cnJlbnQ/LmVsZW1lbnQuY2xpZW50SGVpZ2h0LFxyXG4gICAgICAgIGluZGV4OiBwYWdlU2xpZGVyLnBhZ2VzLmluZGV4T2YoY3VycmVudClcclxuICAgIH0pXHJcblxyXG4gICAgaWYoaXNNb2JpbGUoMTE1MCkpIHtcclxuICAgICAgICBtZW51Lm5hdi5yZW5kZXJTdGF0ZShmYWxzZSlcclxuICAgICAgICBtZW51LmJ1dHRvbi5yZW5kZXJTdGF0ZShmYWxzZSlcclxuICAgIH1cclxuICAgIFxyXG4gICAgbGlua1B1Ymxpc2hlci5ub3RpZnkoY29udHJvbGxlci5nZXRFbGVtZW50KCkpXHJcblxyXG4gICAgcGFnZVNsaWRlci5jaGVja0J1dHRvbigpXHJcbiAgICBwYWdlU2xpZGVyLmNoZWNrQmFja2dyb3VuZCgpXHJcbn0sIDMwMCwgdHJ1ZSkpXHJcblxyXG5jb25zdCBhbnN3ZXJzID0gT2JzZXJ2ZXJMaXN0KFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsPEhUTUxFbGVtZW50PignLnF1ZXN0aW9uX19hbnN3ZXInKV0ubWFwKGEgPT4ge1xyXG4gICAgcmV0dXJuIExpbmtPYnNlcnZlcihDb250cm9sbGVyKHtcclxuICAgICAgICBub2RlOiBhLFxyXG4gICAgICAgIGFjdGl2ZVNlbDogJ3F1ZXN0aW9uX19hbnN3ZXItLWFjdGl2ZSdcclxuICAgIH0pKVxyXG59KSlcclxuXHJcbmNvbnN0IHFhQnV0dG9ucyA9IE9ic2VydmVyTGlzdChbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbDxIVE1MRWxlbWVudD4oJy5xdWVzdGlvbl9fY29udHJvbGxlcicpXS5tYXAoYyA9PiB7XHJcbiAgICByZXR1cm4gTGlua09ic2VydmVyKENvbnRyb2xsZXIoe1xyXG4gICAgICAgIG5vZGU6IGMsXHJcbiAgICAgICAgYWN0aXZlU2VsOiAncXVlc3Rpb25fX2NvbnRyb2xsZXItLWFjdGl2ZSdcclxuICAgIH0pKVxyXG59KSlcclxuXHJcbmNvbnN0IGFuc3dlclB1Ymxpc2hlciA9IFB1Ymxpc2hlcihhbnN3ZXJzKVxyXG5jb25zdCBxYUJ1dHRvblB1Ymxpc2hlciA9IFB1Ymxpc2hlcihxYUJ1dHRvbnMpXHJcblxyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucWFfX3dyYXBwZXInKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZTogYW55KSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhlKVxyXG4gICAgaWYoaXNNb2JpbGUoNzcwKSkge1xyXG4gICAgICAgIGFuc3dlclB1Ymxpc2hlci5ub3RpZnkoZS50YXJnZXQuY2hpbGRyZW5bMF0pXHJcbiAgICAgICAgcWFCdXR0b25QdWJsaXNoZXIubm90aWZ5KGUudGFyZ2V0LmNoaWxkcmVuWzFdKVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgcWFCdXR0b25QdWJsaXNoZXIubm90aWZ5KGUudGFyZ2V0KVxyXG4gICAgYW5zd2VyUHVibGlzaGVyLm5vdGlmeShlLnRhcmdldC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nKVxyXG59KVxyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGRlYm91bmNlKCgpID0+IHtcclxuICAgIGNvbnN0IGN1cnJlbnQgPSBwYWdlU2xpZGVyLnBhZ2VzLmdldEN1cnJlbnQoKVxyXG5cclxuICAgIHBhZ2VTbGlkZXIudHJhY2sudXBkYXRlKHtcclxuICAgICAgICB2YWx1ZTogY3VycmVudC5lbGVtZW50LmNsaWVudEhlaWdodCxcclxuICAgICAgICBpbmRleDogcGFnZVNsaWRlci5wYWdlcy5pbmRleE9mKGN1cnJlbnQpXHJcbiAgICB9KVxyXG59LCAyMDApKVxyXG4iLCJpbXBvcnQge0lDb250cm9sbGVyfSBmcm9tICcuL2NvbnRyb2xsZXInXHJcbmltcG9ydCB7SVRyYW5zZm9ybWVyfSBmcm9tICcuL3RyYW5zZm9ybWVyJ1xyXG5cclxuaW50ZXJmYWNlIElQdWJsaXNoZXIge1xyXG4gICAgc3Vic2NyaWJlKG9iczogSU9ic2VydmVyKTogbnVtYmVyXHJcbiAgICB1bnN1YnNjcmliZShvYnM6IElPYnNlcnZlcik6IElPYnNlcnZlcltdXHJcbiAgICBub3RpZnkoZGF0YT86IGFueSk6IHZvaWRcclxufVxyXG5cclxuaW50ZXJmYWNlIElPYnNlcnZlckxpc3Qge1xyXG4gICAgYXR0YWNoKG9iczogSU9ic2VydmVyKTogbnVtYmVyXHJcbiAgICBkZXRhY2gob2JzOiBJT2JzZXJ2ZXIpOiBJT2JzZXJ2ZXJbXVxyXG4gICAgZ2V0TGlzdCgpOiBJT2JzZXJ2ZXJbXVxyXG4gICAgZ2V0QnlJbmRleChpbmRleDogbnVtYmVyKTogSU9ic2VydmVyXHJcbiAgICBnZXRJbmRleE9mKG9iczogSU9ic2VydmVyKTogbnVtYmVyXHJcbn1cclxuXHJcbmludGVyZmFjZSBJT2JzZXJ2ZXIge1xyXG4gICAgdXBkYXRlKGRhdGE6IGFueSk6IHZvaWRcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIE9ic2VydmVyTGlzdChvYnNlcnZlcnM/IDpJT2JzZXJ2ZXJbXSk6IElPYnNlcnZlckxpc3Qge1xyXG4gICAgY29uc3QgX2xpc3Q6IElPYnNlcnZlcltdID0gb2JzZXJ2ZXJzID8gb2JzZXJ2ZXJzIDogW11cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgYXR0YWNoOiAob2JzKSA9PiBfbGlzdC5wdXNoKG9icyksXHJcbiAgICAgICAgZGV0YWNoOiAob2JzKSA9PiBfbGlzdC5zcGxpY2UoX2xpc3QuaW5kZXhPZihvYnMpLCAxKSxcclxuICAgICAgICBnZXRCeUluZGV4OiAoaW5kZXgpID0+IF9saXN0W2luZGV4XSxcclxuICAgICAgICBnZXRJbmRleE9mOiAob2JzKSA9PiBfbGlzdC5maW5kSW5kZXgoZWwgPT4gZWwgPT09IG9icyksXHJcbiAgICAgICAgZ2V0TGlzdDogKCkgPT4gX2xpc3RcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFB1Ymxpc2hlcihsaXN0PzogSU9ic2VydmVyTGlzdCk6IElQdWJsaXNoZXIge1xyXG4gICAgbGV0IF9vYnNlcnZlcnMgPSBsaXN0ID8gbGlzdCA6IE9ic2VydmVyTGlzdCgpXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1YnNjcmliZTogKG9icykgPT4gX29ic2VydmVycy5hdHRhY2gob2JzKSxcclxuICAgICAgICB1bnN1YnNjcmliZTogKG9icykgPT4gX29ic2VydmVycy5kZXRhY2gob2JzKSxcclxuICAgICAgICBub3RpZnk6IChkYXRhOiBhbnkpID0+IF9vYnNlcnZlcnMuZ2V0TGlzdCgpLmZvckVhY2goKG9iczogSU9ic2VydmVyKSA9PiBvYnMudXBkYXRlKGRhdGEpKVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gTGlua09ic2VydmVyKGxpbms6IElDb250cm9sbGVyKTogSU9ic2VydmVyIHtcclxuICAgIGNvbnN0IF9saW5rID0gbGlua1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB1cGRhdGUoZGF0YSkge1xyXG4gICAgICAgICAgICBpZihkYXRhID09PSBfbGluay5nZXRFbGVtZW50KCkpIHtcclxuICAgICAgICAgICAgICAgIF9saW5rLnJlbmRlclN0YXRlKHRydWUpXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfbGluay5yZW5kZXJTdGF0ZShmYWxzZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFRyYW5zZm9ybWVyT2JzZXJ2ZXIodHJhbnNmb3JtZXI6IElUcmFuc2Zvcm1lcik6IElPYnNlcnZlciB7XHJcbiAgICBjb25zdCBfdHJhbnNmb3JtZXIgPSB0cmFuc2Zvcm1lclxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB1cGRhdGUoZGF0YToge3ZhbHVlOiBudW1iZXIsIGluZGV4OiBudW1iZXJ9KSB7XHJcbiAgICAgICAgICAgIF90cmFuc2Zvcm1lci5zZXRWYWx1ZShgLSR7ZGF0YS52YWx1ZSAqIGRhdGEuaW5kZXh9cHhgKVxyXG4gICAgICAgICAgICBfdHJhbnNmb3JtZXIucmVuZGVyKClcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiZXhwb3J0IGludGVyZmFjZSBJVHJhbnNmb3JtZXIgeyAgICBcclxuICAgIGdldEVsZW1lbnQ6ICgpID0+IEhUTUxFbGVtZW50IHwgbnVsbFxyXG4gICAgc2V0QWN0aW9uKGFjdGlvbjogc3RyaW5nKTogc3RyaW5nXHJcbiAgICBzZXRWYWx1ZSh2YWx1ZTogc3RyaW5nKTogc3RyaW5nXHJcbiAgICByZW5kZXIoKTogc3RyaW5nIHwgbnVsbFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gVHJhbnNmb3JtZXIoXHJcbiAgICBhcmc6IFxyXG4gICAge25vZGU6IEhUTUxFbGVtZW50IHwgbnVsbCwgYWN0aW9uPzogc3RyaW5nLCB2YWx1ZT86IHN0cmluZ31cclxuKTogSVRyYW5zZm9ybWVyICBcclxue1xyXG4gICAgcmV0dXJuIHsgICAgXHJcbiAgICAgICAgcmVuZGVyOiAoKSA9PiBhcmcubm9kZSA/IFxyXG4gICAgICAgICAgICBhcmcubm9kZS5zdHlsZS50cmFuc2Zvcm0gPSBgJHthcmcuYWN0aW9ufSgke2FyZy52YWx1ZX0pYCA6XHJcbiAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgZ2V0RWxlbWVudDogKCkgPT4gYXJnLm5vZGUsXHJcbiAgICAgICAgc2V0QWN0aW9uOiAoYWN0KSA9PiAoYXJnLmFjdGlvbiA9IGFjdCksXHJcbiAgICAgICAgc2V0VmFsdWU6ICh2YWwpID0+IChhcmcudmFsdWUgPSB2YWwpXHJcbiAgICB9XHJcbn1cclxuIiwiLy8gZXhwb3J0IGNvbnN0IGNvbXBvc2UgPSAoLi4uZm5zOiBhbnlbXSkgPT4gKGFyZzogYW55KSA9PiBcclxuLy8gICAgIGZucy5yZWR1Y2VSaWdodCgoYWNjLCBmbikgPT4gZm4oYWNjKSwgYXJnKSBcclxuXHJcbi8vIGV4cG9ydCBjb25zdCBwaXBlID0gKC4uLmZuczogYW55W10pID0+IChhcmc6IGFueSkgPT4gXHJcbi8vICAgICBmbnMucmVkdWNlKChhY2MsIGZuKSA9PiBmbihhY2MpLCBhcmcpXHJcbiAgICBcclxuLy8gZXhwb3J0IGNvbnN0IHdpdGhDb25zdHJ1Y3RvciA9IChjb25zdHJ1Y3Rvcjogb2JqZWN0KSA9PiAob2JqOiBvYmplY3QpID0+ICh7XHJcbi8vICAgICBfX3Byb3RvX186IHtcclxuLy8gICAgICAgICBjb25zdHJ1Y3RvclxyXG4vLyAgICAgfSxcclxuLy8gICAgIC4uLm9ialxyXG4vLyB9KSAgICBcclxuXHJcbmV4cG9ydCBjb25zdCBpc01vYmlsZSA9ICh3aWR0aDogbnVtYmVyKSA9PiB3aW5kb3cuaW5uZXJXaWR0aCA8IHdpZHRoID8gdHJ1ZSA6IGZhbHNlXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZGVib3VuY2UoZm46IGFueSwgd2FpdDogbnVtYmVyLCBpbW1lZGlhdGU/OiBib29sZWFuKSB7XHJcbiAgICBsZXQgdGltZW91dDogbnVtYmVyIHwgIHVuZGVmaW5lZFxyXG5cclxuICAgIHJldHVybiBmdW5jdGlvbiBkZWZmZXJlZCguLi5hcmdzOiBhbnlbXSkge1xyXG4gICAgICAgIGNvbnN0IGNhbGxOb3cgPSBpbW1lZGlhdGUgJiYgIXRpbWVvdXRcclxuXHJcbiAgICAgICAgY29uc3QgaW52b2tlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICB0aW1lb3V0ID0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgIGlmKCFpbW1lZGlhdGUpIGZuLmFwcGx5KGRlZmZlcmVkLCBhcmdzKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpXHJcbiAgICAgICAgXHJcbiAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoaW52b2tlLCB3YWl0KVxyXG5cclxuICAgICAgICBpZihjYWxsTm93KSBmbi5hcHBseShkZWZmZXJlZCwgYXJncylcclxuICAgIH1cclxufVxyXG5cclxuIl19
